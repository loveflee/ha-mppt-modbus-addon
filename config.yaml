name: "MPPT Modbus MQTT Add-on"
slug: "ampinvt_mppt_modbus"        # ✅ 這一行一定要有
version: "1.7.0"
description: "讀取 Ampinvt MPPT 資料並發佈到 MQTT"
startup: services
boot: auto

arch:
  - aarch64
  - amd64
  - armv7

options:
  modbus_host: "192.168.106.12"
  modbus_port: 502
  slave_ids: "1, 2, 3, 4, 5"
  modbus_timeout: 3.0

  mqtt_host: "core-mosquitto"
  mqtt_port: 1883
  mqtt_username: ""
  mqtt_password: ""
  discovery_prefix: "homeassistant"

  node_id: "wifi01"
  device_name: "Ampinvt MPPT"

  poll_interval: 3
  delay_between_units: 0.5
  debug_mode: false

schema:
  modbus_host: str
  modbus_port: port
  slave_ids: str
  modbus_timeout: float

  mqtt_host: str
  mqtt_port: port
  mqtt_username: str
  mqtt_password: str
  discovery_prefix: str

  node_id: str
  device_name: str

  poll_interval: int
  delay_between_units: float
  debug_mode: bool

map:
  - config:rw
