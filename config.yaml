name: "MPPT Modbus MQTT Poller"
version: "7.7"
slug: "mppt_modbus_mqtt_poller"
description: "é€éModbus-gateway(ä¸²å£æœå‹™å™¨é€å‚³æ¨¡å¼)è®€å–Ampinvt MPPTv1.1,ç™¼ä½ˆåˆ°MQTTï¼Œæ”¯æ´HA Discoveryèˆ‡HAä¸Šè¨­å®šåƒæ•¸,Advanced MPPT Monitor with Multi-language support and bi-directional control."
url: "https://github.com/loveflee/ha-mppt-modbus-addon"

arch:
  - amd64
  - armv7
  - aarch64

startup: services
boot: auto
init: false

options:
  debug: false
  timezone_offset: 8
  reset_discovery_on_exit: false
  language: "tw"
  # ğŸŸ¢ [ä¿®æ”¹] é»‘åå–®/æ•…éšœæ‡²ç½°è¨­å®š
  blacklist:
    fail_threshold: 20      # é€£çºŒå¤±æ•—å¹¾æ¬¡å¾Œï¼ŒHA ç‹€æ…‹é¡¯ç¤ºç‚º 'Unavailable'
    isolation_time: 60      # åˆå§‹éš”é›¢æ™‚é–“ (ç§’, è¼•å¾®æ•…éšœ)
    long_delay_threshold: 10 # é€£çºŒå¤±æ•—å¹¾æ¬¡å¾Œï¼Œé€²å…¥é•·å»¶é² (1å°æ™‚)
    long_delay: 3600        # é•·å»¶é²æ™‚é–“ (ç§’, 1å°æ™‚)
  modbus:
    host: "192.168.106.12"
    port: 502
    unit_ids: "1"
    timeout: 3.0
    retry_delay: 2.0
  mqtt:
    broker: "core-mosquitto"
    port: 1883
    username: "mqtt_user"
    password: "mqtt_password"
    discovery_prefix: "homeassistant"
    node_id: "wifi01"
    device_name: "ampinvt_mppt"
  polling:
    poll_interval: 3
    delay_between_units: 0.5

schema:
  debug: bool
  timezone_offset: int
  reset_discovery_on_exit: bool

  language: list(tw|en)

  # ğŸŸ¢ [ä¿®æ”¹] é»‘åå–®/æ•…éšœæ‡²ç½°è¨­å®š
  blacklist:
    fail_threshold: int
    isolation_time: int
    long_delay_threshold: int
    long_delay: int
  
  modbus:
    host: str
    port: int
    unit_ids: str
    timeout: float
    retry_delay: float

  mqtt:
    broker: str
    port: int
    username: str
    password: str
    discovery_prefix: str
    node_id: str
    device_name: str

  polling:
    poll_interval: int
    delay_between_units: float

map:
  - config:rw
  - share:rw
  - ssl:ro
